<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dms_logoplot &mdash; dms_tools 1.1.dev12 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.1.dev12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="dms_tools 1.1.dev12 documentation" href="index.html" />
    <link rel="up" title="Programs" href="programs.html" />
    <link rel="next" title="dms_merge" href="dms_merge.html" />
    <link rel="prev" title="dms_inferdiffprefs" href="dms_inferdiffprefs.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dms_merge.html" title="dms_merge"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="dms_inferdiffprefs.html" title="dms_inferdiffprefs"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">dms_tools 1.1.dev12 documentation</a> &raquo;</li>
          <li><a href="programs.html" accesskey="U">Programs</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dms-logoplot">
<span id="id1"></span><h1><a class="toc-backref" href="#id2"><tt class="docutils literal"><span class="pre">dms_logoplot</span></tt></a><a class="headerlink" href="#dms-logoplot" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dms-logoplot" id="id2"><tt class="docutils literal"><span class="pre">dms_logoplot</span></tt></a><ul>
<li><a class="reference internal" href="#overview" id="id3">Overview</a></li>
<li><a class="reference internal" href="#command-line-usage" id="id4">Command-line usage</a></li>
<li><a class="reference internal" href="#examples" id="id5">Examples</a><ul>
<li><a class="reference internal" href="#preferences-logo-plot" id="id6">Preferences logo plot</a></li>
<li><a class="reference internal" href="#differential-preferences-logo-plot" id="id7">Differential preferences logo plot</a></li>
<li><a class="reference internal" href="#plot-with-an-overlay" id="id8">Plot with an overlay</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id3">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">dms_logoplot</span></tt> is a program included with the <a class="reference external" href="http://jbloom.github.io/dms_tools">dms_tools</a> package. It uses <a class="reference external" href="https://code.google.com/p/weblogo/">weblogo</a> (via the <tt class="docutils literal"><span class="pre">weblogolib</span></tt> <a class="reference external" href="https://www.python.org">Python</a> API) to make logo plots that visually display the preferences or differential preferences.</p>
<p>After you install <a class="reference external" href="http://jbloom.github.io/dms_tools">dms_tools</a>, this program will be available to run at the command line.</p>
</div>
<div class="section" id="command-line-usage">
<h2><a class="toc-backref" href="#id4">Command-line usage</a><a class="headerlink" href="#command-line-usage" title="Permalink to this headline">¶</a></h2>
<p>Make a logo plot visually displaying the preferences or differential preferences. Utilizes weblogo (https://code.google.com/p/weblogo/). This script is part of dms_tools (version 1.1.dev12) written by the Bloom Lab (see https://github.com/jbloom/dms_tools/graphs/contributors for all contributors). Detailed documentation is at http://jbloom.github.io/dms_tools/</p>
<pre class="literal-block">
usage: dms_logoplot [-h] [--nperline NPERLINE] [--numberevery NUMBEREVERY]
                    [--diffprefheight DIFFPREFHEIGHT] [--excludestop]
                    [--overlay1 FILE SHORTNAME LONGNAME]
                    [--overlay2 FILE SHORTNAME LONGNAME]
                    [--stringencyparameter STRINGENCYPARAMETER] [-v]
                    infile logoplot
</pre>
<dl class="docutils">
<dt>Positional arguments:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>infile</kbd></td>
<td><p class="first">Existing file giving the preferences or differential preferences. The program auto-detects which type of data is present. The preferences can be for DNA or amino acids (stop codons allowed, indicated by &#8220;*&#8221;).</p>
<p class="last">Should be in the formats of a <a class="reference internal" href="fileformats.html#preferences-file"><em>Preferences file</em></a> or a <a class="reference internal" href="fileformats.html#diffpreferences-file"><em>Differential preferences file</em></a>.</p>
</td></tr>
<tr><td class="option-group">
<kbd>logoplot</kbd></td>
<td><p class="first">Name of created file containing the logo plot, must end in the extension &#8221;.pdf&#8221;. Overwritten if it already exists.</p>
<p class="last">See <a class="reference internal" href="#examples">Examples</a> for images of the types of plots that are created.</p>
</td></tr>
</tbody>
</table>
</dd>
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--nperline=60</span></kbd></td>
<td>Put this many sites per line of the logo plot.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--numberevery=10</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Number x-axis ticks for sites at this interval.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--diffprefheight=1.0</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>This option is only meaningful if &#8220;infile&#8221; gives differential preferences. In that case, it gives the height of logo stacks (extends from minus this to plus this). Cannot be smaller than the maximum total differential preference range.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--excludestop=False</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>If we are using amino acids, do we remove stop codons (denoted by &#8220;*&#8221;)? We only remove stop codons if this argument is specified. If this option is used, then data for stop codons is removed by re-normalizing preferences to sum to one, and differential preferences to sum to zero.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--overlay1</span></kbd></td>
<td><p class="first">Specify an overlay bar above each line of the logo plot to illustrate a per-residue property such as relative solvent accessibility or secondary structure. Requires three arguments: FILE SHORTNAME LONGNAME. FILE is the name of an existing file. Except for comment lines beginning with &#8220;#&#8221;, each line should have two whitespace delimited columns (additional columns are allowed but ignored). The first column gives the site number (matching that in &#8220;infile&#8221;) and the second column giving the property for this site; properties must either all be non-whitespace strings giving a discrete category (such as secondary structure), or all be numbers (such as relative solvent accessibility). All listed sites must be in &#8220;infile&#8221;, but not all sites in &#8220;infile&#8221; must be in FILE &#8211; missing sites are assumed to lack a known value for the property and are shown in white. SHORTNAME is a short (3-5 character) name of the property, such as &#8220;RSA&#8221; for &#8220;relative solvent accessibility.&#8221; LONGNAME is a longer name (such as &#8220;relative solvent accessibiity&#8221;), or the same as SHORTNAME if you do not have a separate long name.</p>
<p>For instance, contents of an example file specifying relative solvent accessibility for residues 2, 3, 4, and 6 is shown below. In the created <tt class="docutils literal"><span class="pre">logoplot</span></tt>, residue 5 (assuming it exists in <tt class="docutils literal"><span class="pre">infile</span></tt>) will not have any relative solvent accessibility shown:</p>
<div class="highlight-python"><div class="highlight"><pre>#SITE RSA
2     0.3
3     0.56
4     0.02
6     0.72
</pre></div>
</div>
<p>A file specifying secondary structure for the same subset of residues is here:</p>
<div class="highlight-python"><div class="highlight"><pre>#SITE SS
2     helix
3     helix
4     coil
5     sheet
</pre></div>
</div>
<p class="last">For instance, if the above file was named <tt class="docutils literal"><span class="pre">secondary_structures.txt</span></tt>, then you would use the option as <tt class="docutils literal"><span class="pre">--overlay1</span> <span class="pre">secondary_structures.txt</span> <span class="pre">SS</span> <span class="pre">&quot;secondary</span> <span class="pre">structure&quot;</span></tt>.</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--overlay2</span></kbd></td>
<td>Specify a second overlay bar. Arguments have the same meaning as for &#8220;overlay1&#8221;.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--stringencyparameter</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td><p class="first">Scale preferences by this stringency parameter; only valid when &#8216;infile&#8217; specifies preferences.</p>
<p class="last">Use this option if you have fit a stringency parameter <span class="math">\(\beta\)</span> and want to rescale the visualization of the preferences using this parameter. The preferences are rescaled so that each preference is proportional to <span class="math">\(\left(\pi_{r,a}\right)^{\beta}\)</span>, so values &gt; 1 increase the weight of the preferences and values &lt; 1 flatten them.</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-v</span>, <span class="option">--version</span></kbd></td>
<td>show program&#8217;s version number and exit</td></tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="preferences-logo-plot">
<h3><a class="toc-backref" href="#id6">Preferences logo plot</a><a class="headerlink" href="#preferences-logo-plot" title="Permalink to this headline">¶</a></h3>
<p>Imagine that you have used inferred site-specific preferences into <tt class="docutils literal"><span class="pre">preferences.txt</span></tt>, which has the format of a <a class="reference internal" href="fileformats.html#preferences-file"><em>Preferences file</em></a>. To display these preferences using a logo plot, run:</p>
<div class="highlight-python"><div class="highlight"><pre>dms_logoplot preferences.txt prefs_logoplot.pdf --nperline 81 --excludestop
</pre></div>
</div>
<p>This will create the file <tt class="docutils literal"><span class="pre">prefs_logoplot.pdf</span></tt>, which will look something like the image below. Note that this logo plot does <strong>not</strong> include stop codons; if they were shown then they would be black <tt class="docutils literal"><span class="pre">*</span></tt> characters. In the logo plot, the height of each letter is proportional to the preference for that amino acid. The letter heights sum to one, since <span class="math">\(\sum_a \pi_{r,a} = 1\)</span>.</p>
<a class="reference internal image-reference" href="_images/prefs_logoplot.pdf"><img alt="prefs_logoplot.pdf" class="align-center" src="_images/prefs_logoplot.pdf" style="width: 90%;" /></a>
</div>
<div class="section" id="differential-preferences-logo-plot">
<h3><a class="toc-backref" href="#id7">Differential preferences logo plot</a><a class="headerlink" href="#differential-preferences-logo-plot" title="Permalink to this headline">¶</a></h3>
<p>Imagine that you have inferred differential preferences into <tt class="docutils literal"><span class="pre">diffprefs.txt</span></tt>, which has the format of a <a class="reference internal" href="fileformats.html#diffpreferences-file"><em>Differential preferences file</em></a>. To display these differential preferences, run:</p>
<div class="highlight-python"><div class="highlight"><pre>dms_logoplot diffprefs.txt diffprefs_logoplot.pdf --nperline 81 --excludestop --diffprefheight 0.5
</pre></div>
</div>
<p>This will create the file <tt class="docutils literal"><span class="pre">diffprefs_logoplot.pdf</span></tt>, which will look something like the image below. The height of letters above or below the center line are proportional to the differential preference for or against that amino acids. The overall negative and positive heights are equal since <span class="math">\(0 = \sum_a\Delta\pi_{r,a}\)</span>. For instance, in the plot below there is a strong differential preference for <em>M</em> at site 182, and a strong differential preference for <em>V</em> at position 90. Note that in the command above we used <tt class="docutils literal"><span class="pre">--diffprefheight</span> <span class="pre">0.5</span></tt>. This is because if we were not to rescale the y-axis (maximum height of the letter stacks) down, we would only use some of the dynamic range since the maximal differential preference is <span class="math">\(&lt; 0\)</span>.</p>
<a class="reference internal image-reference" href="_images/diffprefs_logoplot.pdf"><img alt="diffprefs_logoplot.pdf" class="align-center" src="_images/diffprefs_logoplot.pdf" style="width: 90%;" /></a>
</div>
<div class="section" id="plot-with-an-overlay">
<h3><a class="toc-backref" href="#id8">Plot with an overlay</a><a class="headerlink" href="#plot-with-an-overlay" title="Permalink to this headline">¶</a></h3>
<p>Now let&#8217;s add an overlay to the <a class="reference internal" href="#preferences-logo-plot">Preferences logo plot</a>. We create files giving the secondary structure and the relative solvent accessibility. These files are <tt class="docutils literal"><span class="pre">SSs.txt</span></tt>, which has the first few lines as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>#SITE SS
18 loop
19 strand
20 strand
21 strand
22 strand
23 strand
24 strand
25 strand
26 loop
</pre></div>
</div>
<p>and <tt class="docutils literal"><span class="pre">RSAs.txt</span></tt>, which has the first few lines as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>#SITE RSA
18 0.170984455959
19 0.168604651163
20 0.0
21 0.0778443113772
22 0.00507614213198
23 0.0
24 0.0
25 0.0803571428571
26 0.0077519379845
</pre></div>
</div>
<p>We now use the command:</p>
<div class="highlight-python"><div class="highlight"><pre>dms_logoplot preferences.txt prefs_logoplot.pdf --nperline 81 --excludestop --overlay1 RSAs.txt RSA &quot;relative solvent accessibility&quot; --overlay2 SSs.txt SS &quot;secondary structure&quot;
</pre></div>
</div>
<p>to create the following image, which displays overlay bars with the secondary structure and solvent accessibility:</p>
<a class="reference internal image-reference" href="_images/prefs_logoplot_withoverlay.pdf"><img alt="prefs_logoplot_withoverlay.pdf" class="align-center" src="_images/prefs_logoplot_withoverlay.pdf" style="width: 90%;" /></a>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">dms_logoplot</span></tt></a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#command-line-usage">Command-line usage</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#preferences-logo-plot">Preferences logo plot</a></li>
<li><a class="reference internal" href="#differential-preferences-logo-plot">Differential preferences logo plot</a></li>
<li><a class="reference internal" href="#plot-with-an-overlay">Plot with an overlay</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="dms_inferdiffprefs.html"
                        title="previous chapter"><tt class="docutils literal"><span class="pre">dms_inferdiffprefs</span></tt></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dms_merge.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">dms_merge</span></tt></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/dms_logoplot.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dms_merge.html" title="dms_merge"
             >next</a> |</li>
        <li class="right" >
          <a href="dms_inferdiffprefs.html" title="dms_inferdiffprefs"
             >previous</a> |</li>
        <li><a href="index.html">dms_tools 1.1.dev12 documentation</a> &raquo;</li>
          <li><a href="programs.html" >Programs</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, Jesse Bloom.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3a0.
    </div>
  </body>
</html>